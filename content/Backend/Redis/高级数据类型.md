## Bitmaps

```
setbit bits 0 1  - 将第0位设置为1
getbit bits 0 - 获取第0位的值

```

## Bitmaps扩展操作

- 业务场景
  - 统计每天某一部电影是否被点播
       给电影补一个id,然后给它一个偏移量,点播过的设置为1
  - 统计每天有多少部电影被点播
  - 统计每周/月/年有多少部电影被点播
      给每天设置一个二进制,然后每一天的二进制进行或操作
  - 统计年度哪部电影没有被点播

```
bitcount - 快速统计
```

```
bitop or 
```


## HyperLogLog - 统计独立UV - 基数统计

基数是数据集去重后元素的个数

LogLog算法

HyperLogLog类型的基本操作:
添加数据
```
pfadd key element

```
统计数据
```
pfcount key [key...]
```
合并数据
  
 ```
  pfmerge destkey sourcekey
  
 ```
 
 用于进行基数统计,不是集合,不保存数据,只记录数量而不是具体数据
 核心是 基数估算算法,最终数值存在一定误差
 误差范围: 基数估计的结果是一个带有0.81%标准错误的近似值

##  GEO - 附近的人
添加坐标点
```
geoadd key longitude latitude member。
```
获取坐标点
```
geopos key member [member...]
```
计算坐标点距离
```
geodist key member1 member2
```

根据坐标求范围内的数据
```
georadius key log lat radius km|m|mi

```

根据点求范围内数据
```
georadiusbymember key member radius 
```
获取指定点对应的坐标hash值
```
geohash key member [member...]
```



 
 
